#:kivy 2.0

<RowData>:
    size_hint_y: None
    height: 30
    offset_label: offset_label
    value_input: value_input
    formatter_button: formatter_button

    canvas.before:
        Color:
            rgba: (.0, .9, .1, .3) if self.selected else (0, 0, 0, 1)
        Rectangle:
            pos: self.pos
            size: self.size

    Label:
        id: offset_label
        text: str(root.offset)

    TextInput:
        id: value_input
        text: str(root.value)
        bold: root.selected
        multiline: False
        input_type: "number"
        input_filter: "float"
        on_focus: self.text = str(root.value) # correcting value

    Button:
        id: formatter_button
        text: root.formatter
        visible: root.formatter != 'boolean'
        size_hint_x: 1 if self.visible else 0
        opacity: 1 if self.visible else 0
        disabled: not self.visible

<DataModel>:
    viewclass: 'RowData'

    SelectableRecycleBoxLayout:
        default_size: None, 30
        default_size_hint: 1, None
        size_hint_y: None
        height: self.minimum_height
        spacing: 2
        orientation: 'vertical'
        touch_deselect_last: True